<table class="table text-white">
  <thead>
    <tr>
      <th></th>
      <th >グループ名</th>
      <th>紹介文</th>
      <th>人数</th>
      <th colspan="3"></th>
    </tr>
  </thead>
  <tbody>
    <% @chats.each do |chat| %>
      <tr>
        <td>
          <% if chat.chat_image.present? %>
            <%= image_tag chat.chat_image, size: "50x50" %>
          <% else %>
            <%= image_tag 'no_image', size: "50x50" %>
          <% end %>
        </td>
        <td><%= link_to chat.name, chat_path(chat) %></td>
        <td><%= chat.introduction %></td>
        <td><%= chat.groups.count %></td>
        <% if chat.is_owned_by?(current_user) %>
        <td><%= link_to "Edit", edit_chat_path(chat), class: "chat_#{chat.id} btn btn-sm btn-success" %></td>
        <% elsif chat.includesUser?(current_user) %>
         <% group = chat.groups.find_by(user_id: current_user.id) %>
        <td><%= link_to 'Leave this group', chat_group_path(chat_id: chat.id, id: group.id), method: :delete, data: { confirm: "本当にグループを退会しますか？" }, class: "btn btn-sm btn-danger" %></td>
        <% else %>
        <td><%= link_to 'Join this group', chat_groups_path(chat), method: :post, data: { confirm: "グループへ入会しますか？" },　class: "btn btn-sm btn-success" %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
